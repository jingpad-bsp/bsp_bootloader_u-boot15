/*
 * Copyright (C) 2017 Spreadtrum Communications Inc.
 *
 * This software is licensed under the terms of the GNU General Public
 * License version 2, as published by the Free Software Foundation, and
 * may be copied, distributed, and modified under those terms.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include "sprd_panel.h"
#include "sprd_dsi.h"
#include "dsi/mipi_dsi_api.h"
#include "sprd_dphy.h"
#include <i2c.h>

static 	uint8_t init_data[] = {
0x15, 0x00, 0x00, 0x02,0xFF,0x20,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x01,0x55,
0x15, 0x00, 0x00, 0x02,0x03,0x55,
0x15, 0x00, 0x00, 0x02,0x05,0x99,
0x15, 0x00, 0x00, 0x02,0x07,0x4B,
0x15, 0x00, 0x00, 0x02,0x08,0xDF,
0x15, 0x00, 0x00, 0x02,0x0E,0x69,
0x15, 0x00, 0x00, 0x02,0x0F,0x7D,
0x15, 0x00, 0x00, 0x02,0x89,0xBD,
0x15, 0x00, 0x00, 0x02,0x8A,0xBD,
0x15, 0x00, 0x00, 0x02,0x8B,0xBD,
0x15, 0x00, 0x00, 0x02,0x8C,0xBD,
0x15, 0x00, 0x00, 0x02,0x8D,0xBD,
0x15, 0x00, 0x00, 0x02,0x8E,0xBD,
// 2020/03/04 modified by BOE -> GVDDPN=+/-5.6V
0x15, 0x00, 0x00, 0x02,0x94,0xC0,
0x15, 0x00, 0x00, 0x02,0x95,0x13,
0x15, 0x00, 0x00, 0x02,0x96,0x13,
0x15, 0x00, 0x00, 0x02,0x69,0x91,
0x15, 0x00, 0x00, 0x02,0x1F,0x02,
//GAMMA -> 2020/03/04 add by BOE
0x15, 0x00, 0x00, 0x02,0xFF,0x20,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
//R(+)
0x39, 0x00, 0x00, 0x11,0xB0,0x00,0x00,0x00,0x01,0x00,0x2E,0x00,0x46,0x00,0x5A,0x00,0x6D,0x00,0x7E,0x00,0x8F,
0x39, 0x00, 0x00, 0x11,0xB1,0x00,0x9D,0x00,0xD3,0x00,0xFC,0x01,0x40,0x01,0x71,0x01,0xC5,0x02,0x03,0x02,0x06,
0x39, 0x00, 0x00, 0x11,0xB2,0x02,0x44,0x02,0x87,0x02,0xB6,0x02,0xEB,0x03,0x13,0x03,0x3E,0x03,0x50,0x03,0x5F,
0x39, 0x00, 0x00, 0x0d,0xB3,0x03,0x73,0x03,0x8B,0x03,0xA9,0x03,0xC7,0x03,0xD9,0x03,0xDC,
//G(+)
0x39, 0x00, 0x00, 0x11,0xB4,0x00,0x00,0x00,0x01,0x00,0x2E,0x00,0x46,0x00,0x5A,0x00,0x6D,0x00,0x7E,0x00,0x8F,
0x39, 0x00, 0x00, 0x11,0xB5,0x00,0x9D,0x00,0xD3,0x00,0xFC,0x01,0x40,0x01,0x71,0x01,0xC5,0x02,0x03,0x02,0x06,
0x39, 0x00, 0x00, 0x11,0xB6,0x02,0x44,0x02,0x87,0x02,0xB6,0x02,0xEB,0x03,0x13,0x03,0x3E,0x03,0x50,0x03,0x5F,
0x39, 0x00, 0x00, 0x0d,0xB7,0x03,0x73,0x03,0x8B,0x03,0xA9,0x03,0xC7,0x03,0xD9,0x03,0xDC,
//B(+)
0x39, 0x00, 0x00, 0x11,0xB8,0x00,0x00,0x00,0x01,0x00,0x2E,0x00,0x46,0x00,0x5A,0x00,0x6D,0x00,0x7E,0x00,0x8F,
0x39, 0x00, 0x00, 0x11,0xB9,0x00,0x9D,0x00,0xD3,0x00,0xFC,0x01,0x40,0x01,0x71,0x01,0xC5,0x02,0x03,0x02,0x06,
0x39, 0x00, 0x00, 0x11,0xBA,0x02,0x44,0x02,0x87,0x02,0xB6,0x02,0xEB,0x03,0x13,0x03,0x3E,0x03,0x50,0x03,0x5F,
0x39, 0x00, 0x00, 0x0d,0xBB,0x03,0x73,0x03,0x8B,0x03,0xA9,0x03,0xC7,0x03,0xD9,0x03,0xDC,
0x15, 0x00, 0x00, 0x02,0xFF,0x21,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
//R(-)
0x39, 0x00, 0x00, 0x11,0xB0,0x00,0x00,0x00,0x01,0x00,0x26,0x00,0x3E,0x00,0x52,0x00,0x65,0x00,0x76,0x00,0x87,
0x39, 0x00, 0x00, 0x11,0xB1,0x00,0x95,0x00,0xCB,0x00,0xF4,0x01,0x38,0x01,0x69,0x01,0xBD,0x01,0xFB,0x01,0xFE,
0x39, 0x00, 0x00, 0x11,0xB2,0x02,0x3C,0x02,0x7F,0x02,0xAE,0x02,0xE3,0x03,0x0B,0x03,0x36,0x03,0x48,0x03,0x57,
0x39, 0x00, 0x00, 0x0d,0xB3,0x03,0x6B,0x03,0x83,0x03,0xA1,0x03,0xBF,0x03,0xD9,0x03,0xDC,
//G(-)
0x39, 0x00, 0x00, 0x11,0xB4,0x00,0x00,0x00,0x01,0x00,0x26,0x00,0x3E,0x00,0x52,0x00,0x65,0x00,0x76,0x00,0x87,
0x39, 0x00, 0x00, 0x11,0xB5,0x00,0x95,0x00,0xCB,0x00,0xF4,0x01,0x38,0x01,0x69,0x01,0xBD,0x01,0xFB,0x01,0xFE,
0x39, 0x00, 0x00, 0x11,0xB6,0x02,0x3C,0x02,0x7F,0x02,0xAE,0x02,0xE3,0x03,0x0B,0x03,0x36,0x03,0x48,0x03,0x57,
0x39, 0x00, 0x00, 0x0d,0xB7,0x03,0x6B,0x03,0x83,0x03,0xA1,0x03,0xBF,0x03,0xD9,0x03,0xDC,
//B(-)
0x39, 0x00, 0x00, 0x11,0xB8,0x00,0x00,0x00,0x01,0x00,0x26,0x00,0x3E,0x00,0x52,0x00,0x65,0x00,0x76,0x00,0x87,
0x39, 0x00, 0x00, 0x11,0xB9,0x00,0x95,0x00,0xCB,0x00,0xF4,0x01,0x38,0x01,0x69,0x01,0xBD,0x01,0xFB,0x01,0xFE,
0x39, 0x00, 0x00, 0x11,0xBA,0x02,0x3C,0x02,0x7F,0x02,0xAE,0x02,0xE3,0x03,0x0B,0x03,0x36,0x03,0x48,0x03,0x57,
0x39, 0x00, 0x00, 0x0d,0xBB,0x03,0x6B,0x03,0x83,0x03,0xA1,0x03,0xBF,0x03,0xD9,0x03,0xDC,
0x15, 0x00, 0x00, 0x02,0xFF,0x23,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x12,0xB4,
0x15, 0x00, 0x00, 0x02,0x15,0xE9,
0x15, 0x00, 0x00, 0x02,0x16,0x0B,
0x15, 0x00, 0x00, 0x02,0xFF,0x24,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x93,0x0A,
0x15, 0x00, 0x00, 0x02,0x94,0x0A,
0x15, 0x00, 0x00, 0x02,0x00,0x00,
0x15, 0x00, 0x00, 0x02,0x01,0x1E,
0x15, 0x00, 0x00, 0x02,0x02,0x1D,
0x15, 0x00, 0x00, 0x02,0x03,0x21,
0x15, 0x00, 0x00, 0x02,0x04,0x04,
0x15, 0x00, 0x00, 0x02,0x05,0x05,
0x15, 0x00, 0x00, 0x02,0x06,0x1F,
0x15, 0x00, 0x00, 0x02,0x07,0x20,
0x15, 0x00, 0x00, 0x02,0x08,0x0C,
0x15, 0x00, 0x00, 0x02,0x09,0x0D,
0x15, 0x00, 0x00, 0x02,0x0A,0x0E,
0x15, 0x00, 0x00, 0x02,0x0B,0x0F,
0x15, 0x00, 0x00, 0x02,0x0C,0x00,
0x15, 0x00, 0x00, 0x02,0x0D,0x00,
0x15, 0x00, 0x00, 0x02,0x0E,0x00,
0x15, 0x00, 0x00, 0x02,0x0F,0x00,
0x15, 0x00, 0x00, 0x02,0x10,0x00,
0x15, 0x00, 0x00, 0x02,0x11,0x00,
0x15, 0x00, 0x00, 0x02,0x12,0x00,
0x15, 0x00, 0x00, 0x02,0x13,0x00,
0x15, 0x00, 0x00, 0x02,0x14,0x00,
0x15, 0x00, 0x00, 0x02,0x15,0x00,
0x15, 0x00, 0x00, 0x02,0x16,0x00,
0x15, 0x00, 0x00, 0x02,0x17,0x1E,
0x15, 0x00, 0x00, 0x02,0x18,0x1D,
0x15, 0x00, 0x00, 0x02,0x19,0x21,
0x15, 0x00, 0x00, 0x02,0x1A,0x04,
0x15, 0x00, 0x00, 0x02,0x1B,0x05,
0x15, 0x00, 0x00, 0x02,0x1C,0x1F,
0x15, 0x00, 0x00, 0x02,0x1D,0x20,
0x15, 0x00, 0x00, 0x02,0x1E,0x0C,
0x15, 0x00, 0x00, 0x02,0x1F,0x0D,
0x15, 0x00, 0x00, 0x02,0x20,0x0E,
0x15, 0x00, 0x00, 0x02,0x21,0x0F,
0x15, 0x00, 0x00, 0x02,0x22,0x00,
0x15, 0x00, 0x00, 0x02,0x23,0x00,
0x15, 0x00, 0x00, 0x02,0x24,0x00,
0x15, 0x00, 0x00, 0x02,0x25,0x00,
0x15, 0x00, 0x00, 0x02,0x26,0x00,
0x15, 0x00, 0x00, 0x02,0x27,0x00,
0x15, 0x00, 0x00, 0x02,0x28,0x00,
0x15, 0x00, 0x00, 0x02,0x29,0x00,
0x15, 0x00, 0x00, 0x02,0x2A,0x00,
0x15, 0x00, 0x00, 0x02,0x2B,0x00,
0x15, 0x00, 0x00, 0x02,0x2F,0x08,
0x15, 0x00, 0x00, 0x02,0x30,0x06,
0x15, 0x00, 0x00, 0x02,0x31,0x00,
0x15, 0x00, 0x00, 0x02,0x32,0x00,
0x15, 0x00, 0x00, 0x02,0x33,0x06,
0x15, 0x00, 0x00, 0x02,0x34,0x08,
0x15, 0x00, 0x00, 0x02,0x35,0x00,
0x15, 0x00, 0x00, 0x02,0x36,0x00,
0x15, 0x00, 0x00, 0x02,0x37,0x44,
0x15, 0x00, 0x00, 0x02,0x38,0x44,
0x15, 0x00, 0x00, 0x02,0x39,0x00,
0x15, 0x00, 0x00, 0x02,0x3A,0x24,
0x15, 0x00, 0x00, 0x02,0x3B,0x88,
0x15, 0x00, 0x00, 0x02,0x3D,0x52,
0x15, 0x00, 0x00, 0x02,0x4D,0x34,
0x15, 0x00, 0x00, 0x02,0x4E,0x12,
0x15, 0x00, 0x00, 0x02,0x4F,0x00,
0x15, 0x00, 0x00, 0x02,0x50,0x00,
0x15, 0x00, 0x00, 0x02,0x51,0x21,
0x15, 0x00, 0x00, 0x02,0x52,0x43,
0x15, 0x00, 0x00, 0x02,0x53,0x00,
0x15, 0x00, 0x00, 0x02,0x54,0x00,
0x15, 0x00, 0x00, 0x02,0x55,0x47,
0x15, 0x00, 0x00, 0x02,0x56,0x44,
0x15, 0x00, 0x00, 0x02,0x58,0x21,
0x15, 0x00, 0x00, 0x02,0x59,0x00,
0x15, 0x00, 0x00, 0x02,0x5A,0x24,
0x15, 0x00, 0x00, 0x02,0x5B,0x88,
0x15, 0x00, 0x00, 0x02,0x5C,0x80,
0x15, 0x00, 0x00, 0x02,0x5D,0x0F,
0x15, 0x00, 0x00, 0x02,0x5E,0x04,
0x15, 0x00, 0x00, 0x02,0x5F,0x00,
0x15, 0x00, 0x00, 0x02,0x88,0x2E,
0x15, 0x00, 0x00, 0x02,0x89,0x40,
0x15, 0x00, 0x00, 0x02,0x8A,0x8F,
0x15, 0x00, 0x00, 0x02,0x8D,0x00,
0x15, 0x00, 0x00, 0x02,0x8E,0x0F,
0x15, 0x00, 0x00, 0x02,0x60,0x80,
0x15, 0x00, 0x00, 0x02,0x61,0x90,
0x15, 0x00, 0x00, 0x02,0x64,0x10,
0x15, 0x00, 0x00, 0x02,0x80,0x08,
0x15, 0x00, 0x00, 0x02,0x81,0x04,
0x15, 0x00, 0x00, 0x02,0x82,0x08,
0x15, 0x00, 0x00, 0x02,0x83,0x04,
//2020/02/17 update
0x15, 0x00, 0x00, 0x02,0x84,0x00,
0x15, 0x00, 0x00, 0x02,0x85,0x01,
0x15, 0x00, 0x00, 0x02,0x86,0x04,
0x15, 0x00, 0x00, 0x02,0x91,0x40,
0x15, 0x00, 0x00, 0x02,0x92,0xA7,
0x15, 0x00, 0x00, 0x02,0x98,0x80,
0x15, 0x00, 0x00, 0x02,0xAB,0x00,
0x15, 0x00, 0x00, 0x02,0xAD,0x00,
0x15, 0x00, 0x00, 0x02,0xAF,0x04,
0x15, 0x00, 0x00, 0x02,0xB0,0x05,
0x15, 0x00, 0x00, 0x02,0xB1,0xA3,
0x15, 0x00, 0x00, 0x02,0xFF,0x25,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x17,0x82,
0x15, 0x00, 0x00, 0x02,0x18,0x06,
0x15, 0x00, 0x00, 0x02,0x19,0x0F,
0x15, 0x00, 0x00, 0x02,0x1E,0x00,
0x15, 0x00, 0x00, 0x02,0x1F,0x24,
0x15, 0x00, 0x00, 0x02,0x20,0x88,
0x15, 0x00, 0x00, 0x02,0x23,0x05,
0x15, 0x00, 0x00, 0x02,0x24,0xA3,
0x15, 0x00, 0x00, 0x02,0x25,0x00,
0x15, 0x00, 0x00, 0x02,0x26,0x24,
0x15, 0x00, 0x00, 0x02,0x27,0x88,
0x15, 0x00, 0x00, 0x02,0x2A,0x05,
0x15, 0x00, 0x00, 0x02,0x2B,0xA3,
0x15, 0x00, 0x00, 0x02,0x2F,0x55,
0x15, 0x00, 0x00, 0x02,0x30,0x11,
0x15, 0x00, 0x00, 0x02,0x31,0x00,
0x15, 0x00, 0x00, 0x02,0x32,0x00,
0x15, 0x00, 0x00, 0x02,0x33,0x24,
0x15, 0x00, 0x00, 0x02,0x34,0x88,
0x15, 0x00, 0x00, 0x02,0x37,0x05,
0x15, 0x00, 0x00, 0x02,0x38,0xA3,
0x15, 0x00, 0x00, 0x02,0x40,0x11,
0x15, 0x00, 0x00, 0x02,0x41,0x80,
0x15, 0x00, 0x00, 0x02,0x42,0x24,
0x15, 0x00, 0x00, 0x02,0x43,0x88,
0x15, 0x00, 0x00, 0x02,0x46,0x05,
0x15, 0x00, 0x00, 0x02,0x47,0xA3,
0x15, 0x00, 0x00, 0x02,0x49,0x00,
0x15, 0x00, 0x00, 0x02,0x4A,0x00,
0x15, 0x00, 0x00, 0x02,0x4B,0x24,
0x15, 0x00, 0x00, 0x02,0x4C,0x88,
0x15, 0x00, 0x00, 0x02,0x4F,0x24,
0x15, 0x00, 0x00, 0x02,0x50,0x88,
0x15, 0x00, 0x00, 0x02,0x53,0x05,
0x15, 0x00, 0x00, 0x02,0x54,0xA3,
0x15, 0x00, 0x00, 0x02,0x55,0x05,
0x15, 0x00, 0x00, 0x02,0x56,0xA3,
0x15, 0x00, 0x00, 0x02,0x5A,0x22,
0x15, 0x00, 0x00, 0x02,0x5B,0xC0,
0x15, 0x00, 0x00, 0x02,0x5C,0x00,
0x15, 0x00, 0x00, 0x02,0x5D,0x24,
0x15, 0x00, 0x00, 0x02,0x5E,0x88,
0x15, 0x00, 0x00, 0x02,0x61,0x24,
0x15, 0x00, 0x00, 0x02,0x62,0x88,
0x15, 0x00, 0x00, 0x02,0x65,0x05,
0x15, 0x00, 0x00, 0x02,0x66,0xA3,
0x15, 0x00, 0x00, 0x02,0x8A,0x00,
0x15, 0x00, 0x00, 0x02,0xC0,0x07,
0x15, 0x00, 0x00, 0x02,0xC2,0x84,
0x15, 0x00, 0x00, 0x02,0xC6,0x92,
0x15, 0x00, 0x00, 0x02,0xCA,0x1C,
0x15, 0x00, 0x00, 0x02,0xCC,0x1C,
0x15, 0x00, 0x00, 0x02,0xCD,0x00,
0x15, 0x00, 0x00, 0x02,0xCE,0x00,
0x15, 0x00, 0x00, 0x02,0xD3,0x11,
0x15, 0x00, 0x00, 0x02,0xD4,0xCC,
0x15, 0x00, 0x00, 0x02,0xD5,0x11,
0x15, 0x00, 0x00, 0x02,0xD6,0x1C,
0x15, 0x00, 0x00, 0x02,0xD7,0x11,
0x15, 0x00, 0x00, 0x02,0x0A,0x82,
0x15, 0x00, 0x00, 0x02,0x0B,0x79,
0x15, 0x00, 0x00, 0x02,0x0C,0x01,
0x15, 0x00, 0x00, 0x02,0xFF,0x26,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x00,0xA1,
0x15, 0x00, 0x00, 0x02,0x04,0x4A,
0x15, 0x00, 0x00, 0x02,0x06,0xFF,
0x15, 0x00, 0x00, 0x02,0x0C,0x0B,
0x15, 0x00, 0x00, 0x02,0x0D,0x01,
0x15, 0x00, 0x00, 0x02,0x0E,0x02,
0x15, 0x00, 0x00, 0x02,0x0F,0x06,
0x15, 0x00, 0x00, 0x02,0x10,0x07,
0x15, 0x00, 0x00, 0x02,0x11,0x00,
0x15, 0x00, 0x00, 0x02,0x13,0x28,
0x15, 0x00, 0x00, 0x02,0x14,0x90,
0x15, 0x00, 0x00, 0x02,0x16,0x81,
0x15, 0x00, 0x00, 0x02,0x19,0x1A,
0x15, 0x00, 0x00, 0x02,0x1A,0x0D,
0x15, 0x00, 0x00, 0x02,0x1B,0x12,
0x15, 0x00, 0x00, 0x02,0x1C,0x82,
0x15, 0x00, 0x00, 0x02,0x1D,0x00,
0x15, 0x00, 0x00, 0x02,0x1E,0xA7,
0x15, 0x00, 0x00, 0x02,0x1F,0xA7,
0x15, 0x00, 0x00, 0x02,0x24,0x00,
0x15, 0x00, 0x00, 0x02,0x25,0xA7,
0x15, 0x00, 0x00, 0x02,0x26,0x66,
0x15, 0x00, 0x00, 0x02,0x27,0x66,
0x15, 0x00, 0x00, 0x02,0x28,0x66,
0x15, 0x00, 0x00, 0x02,0x29,0x06,
0x15, 0x00, 0x00, 0x02,0x2F,0x02,
0x15, 0x00, 0x00, 0x02,0x30,0xA7,
0x15, 0x00, 0x00, 0x02,0x31,0x11,
0x15, 0x00, 0x00, 0x02,0x32,0x11,
0x15, 0x00, 0x00, 0x02,0x34,0x03,
0x15, 0x00, 0x00, 0x02,0x35,0xA7,
0x15, 0x00, 0x00, 0x02,0x36,0x78,
0x15, 0x00, 0x00, 0x02,0x37,0x66,
0x15, 0x00, 0x00, 0x02,0x38,0x66,
0x15, 0x00, 0x00, 0x02,0x39,0x06,
0x15, 0x00, 0x00, 0x02,0x3F,0x04,
0x15, 0x00, 0x00, 0x02,0x40,0xA7,
0x15, 0x00, 0x00, 0x02,0x41,0x00,
0x15, 0x00, 0x00, 0x02,0x42,0x00,
0x15, 0x00, 0x00, 0x02,0x43,0x00,
0x15, 0x00, 0x00, 0x02,0xFF,0x26,
0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x58,0xCC,
0x15, 0x00, 0x00, 0x02,0x59,0xCC,
0x15, 0x00, 0x00, 0x02,0x5A,0xCC,
0x15, 0x00, 0x00, 0x02,0x5B,0xCC,
0x15, 0x00, 0x00, 0x02,0x5C,0x00,
0x15, 0x00, 0x00, 0x02,0x5D,0x00,
0x15, 0x00, 0x00, 0x02,0x5E,0x04,
0x15, 0x00, 0x00, 0x02,0x5F,0x00,
0x15, 0x00, 0x00, 0x02,0x60,0x00,
0x15, 0x00, 0x00, 0x02,0x61,0x00,
0x15, 0x00, 0x00, 0x02,0x63,0x24,
0x15, 0x00, 0x00, 0x02,0x64,0x88,
0x15, 0x00, 0x00, 0x02,0x67,0x24,
0x15, 0x00, 0x00, 0x02,0x68,0x88,
0x15, 0x00, 0x00, 0x02,0x6B,0x00,
0x15, 0x00, 0x00, 0x02,0x6C,0x05,
0x15, 0x00, 0x00, 0x02,0x6D,0x00,
0x15, 0x00, 0x00, 0x02,0x70,0x05,
0x15, 0x00, 0x00, 0x02,0x71,0xC8,
0x15, 0x00, 0x00, 0x02,0x73,0x24,
0x15, 0x00, 0x00, 0x02,0x74,0x88,
0x15, 0x00, 0x00, 0x02,0x77,0x05,
0x15, 0x00, 0x00, 0x02,0x78,0xC8,
0x15, 0x00, 0x00, 0x02,0x79,0x00,
0x15, 0x00, 0x00, 0x02,0x7A,0x24,
0x15, 0x00, 0x00, 0x02,0x7B,0x88,
0x15, 0x00, 0x00, 0x02,0x7E,0x05,
0x15, 0x00, 0x00, 0x02,0x7F,0xC8,
0x15, 0x00, 0x00, 0x02,0x80,0x00,
0x15, 0x00, 0x00, 0x02,0x81,0x00,
0x15, 0x00, 0x00, 0x02,0x82,0x24,
0x15, 0x00, 0x00, 0x02,0x83,0x88,
0x15, 0x00, 0x00, 0x02,0x86,0x24,
0x15, 0x00, 0x00, 0x02,0x87,0x88,
0x15, 0x00, 0x00, 0x02,0x8A,0x05,
0x15, 0x00, 0x00, 0x02,0x8B,0xC8,
0x15, 0x00, 0x00, 0x02,0x8C,0x00,
0x15, 0x00, 0x00, 0x02,0x8D,0x00,
0x15, 0x00, 0x00, 0x02,0x8E,0x01,
0x15, 0x00, 0x00, 0x02,0x8F,0x00,
0x15, 0x00, 0x00, 0x02,0x90,0x00,
0x15, 0x00, 0x00, 0x02,0x91,0x00,
0x15, 0x00, 0x00, 0x02,0x92,0x06,
0x15, 0x00, 0x00, 0x02,0x93,0x40,
0x15, 0x00, 0x00, 0x02,0x94,0x00,
0x15, 0x00, 0x00, 0x02,0x95,0x00,
0x15, 0x00, 0x00, 0x02,0x96,0x00,
0x15, 0x00, 0x00, 0x02,0x99,0x0D,
0x15, 0x00, 0x00, 0x02,0x9A,0x36,
0x15, 0x00, 0x00, 0x02,0x9B,0x0C,
0x15, 0x00, 0x00, 0x02,0x9C,0x9E,
0x15, 0x00, 0x00, 0x02,0x44,0x33,
0x15, 0x00, 0x00, 0x02,0x45,0x0E,
0x15, 0x00, 0x00, 0x02,0xA9,0x46,
0x15, 0x00, 0x00, 0x02,0xAA,0x40,
0x15, 0x00, 0x00, 0x02,0xAB,0x52,
0x15, 0x00, 0x00, 0x02,0xAC,0x4E,
0x15, 0x00, 0x00, 0x02,0xAD,0x6C,
0x15, 0x00, 0x00, 0x02,0xAE,0x34,
0x15, 0x00, 0x00, 0x02,0xAF,0x72,
0x15, 0x00, 0x00, 0x02,0xB0,0x58,
0x15, 0x00, 0x00, 0x02,0xB1,0x4C,
0x15, 0x00, 0x00, 0x02,0xB2,0x48,
0x15, 0x00, 0x00, 0x02,0xB3,0x54,
0x15, 0x00, 0x00, 0x02,0xB4,0x74,
0x15, 0x00, 0x00, 0x02,0xB5,0x42,
0x15, 0x00, 0x00, 0x02,0xB6,0x78,
0x15, 0x00, 0x00, 0x02,0xB7,0x2E,
0x15, 0x00, 0x00, 0x02,0xB8,0x3A,
0x15, 0x00, 0x00, 0x02,0xB9,0x66,
0x15, 0x00, 0x00, 0x02,0xBA,0x5E,


0x15, 0x00, 0x00, 0x02,0xFF,0x27,

0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x13,0x00,
0x15, 0x00, 0x00, 0x02,0x14,0x55,
0x15, 0x00, 0x00, 0x02,0x1F,0x55,

////////////////////////////////
//////////// modified //////////
////////////////////////////////
0x15, 0x00, 0x00, 0x02,0xFF,0x24,

0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x8D,0x80,
0x15, 0x00, 0x00, 0x02,0x3A,0x86,
0x15, 0x00, 0x00, 0x02,0x5A,0x86,
//2020/03/04 modify
0x15, 0x00, 0x00, 0x02,0x5D,0x08,
0x15, 0x00, 0x00, 0x02,0x88,0x32,
0x15, 0x00, 0x00, 0x02,0x89,0xC0,
0x15, 0x00, 0x00, 0x02,0x8E,0x08,

0x15, 0x00, 0x00, 0x02,0xFF,0x25,

0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x56,0x23,
0x15, 0x00, 0x00, 0x02,0x1F,0x86,
0x15, 0x00, 0x00, 0x02,0x26,0x86,
0x15, 0x00, 0x00, 0x02,0x33,0x86,
0x15, 0x00, 0x00, 0x02,0x42,0x86,
0x15, 0x00, 0x00, 0x02,0x4B,0x86,
0x15, 0x00, 0x00, 0x02,0x4F,0x86,
0x15, 0x00, 0x00, 0x02,0x5D,0x86,
0x15, 0x00, 0x00, 0x02,0x61,0x86,

0x15, 0x00, 0x00, 0x02,0xFF,0x26,

0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0x63,0x86,
0x15, 0x00, 0x00, 0x02,0x67,0x86,
0x15, 0x00, 0x00, 0x02,0x73,0x86,
0x15, 0x00, 0x00, 0x02,0x7A,0x86,
0x15, 0x00, 0x00, 0x02,0x82,0x86,
0x15, 0x00, 0x00, 0x02,0x86,0x86,

0x15, 0x00, 0x00, 0x02,0xFF,0x10,

0x15, 0x00, 0x00, 0x02,0xFB,0x01,
0x15, 0x00, 0x00, 0x02,0xBA,0x03,
0x13, 0x78, 0x00, 0x01, 0x11,
0x13, 0x64, 0x00, 0x01, 0x29,
	CMD_END
};

static int mipi_dsi_send_cmds(struct sprd_dsi *dsi, void *data)
{
	uint16_t len;
	struct dsi_cmd_desc *cmds = data;

	if ((cmds == NULL) || (dsi == NULL))
		return -1;

	for (; cmds->data_type != CMD_END;) {
		len = (cmds->wc_h << 8) | cmds->wc_l;
		mipi_dsi_dcs_write(dsi, cmds->payload, len);
		if (cmds->wait)
			msleep(cmds->wait);
		cmds = (struct dsi_cmd_desc *)(cmds->payload + len);
	}
	return 0;
}

static int nt36525b_init(void)
{
	struct sprd_dsi *dsi = &dsi_device;
	struct sprd_dphy *dphy = &dphy_device;

	mipi_dsi_lp_cmd_enable(dsi, true);
	mipi_dsi_send_cmds(dsi, init_data);
	mipi_dsi_set_work_mode(dsi, SPRD_MIPI_MODE_VIDEO);
	mipi_dsi_state_reset(dsi);
	mipi_dphy_hs_clk_en(dphy, true);

	return 0;
}

static int nt36525b_readid(void)
{
	struct sprd_dsi *dsi = &dsi_device;
	uint8_t read_buf[4] = {0};

	mipi_dsi_lp_cmd_enable(dsi, true);
	mipi_dsi_set_max_return_size(dsi, 3);
	mipi_dsi_dcs_read(dsi, 0xf4, read_buf, 3);

	if(read_buf[0] == 0x25) {
		pr_info("nt36525b read id success!\n");
		return 0;
        }
	pr_err("nt36525b read id failed:0x%x,0x%x,0x%x,0x%x\n",read_buf[0],read_buf[1],read_buf[2],read_buf[3]);
	return -1;

}

static int nt36525b_power(int on)
{
	if (on) {
		sprd_gpio_request(NULL, CONFIG_LCM_GPIO_RSTN);
		sprd_gpio_direction_output(NULL, CONFIG_LCM_GPIO_RSTN, 1);
		mdelay(5);
		sprd_gpio_direction_output(NULL, CONFIG_LCM_GPIO_RSTN, 0);
		mdelay(5);
		sprd_gpio_direction_output(NULL, CONFIG_LCM_GPIO_RSTN, 1);
		mdelay(20);
	} else {
		sprd_gpio_direction_output(NULL, CONFIG_LCM_GPIO_RSTN, 0);
		mdelay(5);
	}

	return 0;
}

static struct panel_ops nt36525b_ops = {
	.init = nt36525b_init,
	.read_id = nt36525b_readid,
	.power = nt36525b_power,
};

static struct panel_info nt36525b_info = {
	/* common parameters */
	.lcd_name = "lcd_nt36525b_boe_mipi_fhd",
	.type = SPRD_PANEL_TYPE_MIPI,
	.bpp = 24,
	.width = 720,
	.height = 1600,

	.pixel_clk = 76800000, /*Hz*/
	.rgb_timing = {
		.hfp = 30,
		.hbp = 30,
		.hsync = 2,
		.vfp = 10,
		.vbp = 8,
		.vsync = 2,
	},

	/* MIPI DSI specific parameters */
	.phy_freq = 620000, //633000, //520*1000,
	.lane_num = 4,
	.work_mode = SPRD_MIPI_MODE_VIDEO,
	.burst_mode = VIDEO_BURST_WITH_SYNC_PULSES,
	.nc_clk_en = false,
};

struct panel_driver nt36525b_boe_driver = {
	.info = &nt36525b_info,
	.ops = &nt36525b_ops,
};
